<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="MyWish">
	<!-- Use type aliases to avoid typing the full classname every time. -->
	<resultMap id="MyWishResult" type="MyWish">
		<result property="wishNo" column="wishNo" />
		<result property="email" column="email" />
		<result property="product" column="product" />
		<result property="price" column="price" />
		<result property="remainDate" column="remainDate" />
		<result property="success" column="success" />
		<result property="img" column="img" />
	</resultMap>
	<select id="total" parameterType="String" resultType="int">
 	 	select count(*) from MyWish where email=#{email}
  	</select>
	
	<select id="myWishList" parameterType="MyWish" resultMap="MyWishResult">
		select * from (select rownum rn, a.* from (select * from MyWish where email=#{email} order by wishNo) a) where rn between #{start} and #{end}
	</select>
	
	<select id="selectItem" parameterType="MyWish" resultType="MyWish">
		select * from MyWish where wishNo = #{wishNo, jdbcType=INTEGER} and email = #{email, jdbcType=VARCHAR}
	</select>
	<select id="isIn" parameterType="MyWish" resultType="integer">
		select count(wishNo) from MyWish where wishNo = #{wishNo, jdbcType=INTEGER} and email = #{email, jdbcType=VARCHAR}
	</select>
	<update id="updateMyWish" parameterType="MyWish">
		update MyWish set product = #{product}, price = #{price}, remainDate = #{remainDate}, img = #{img} where wishNo = ${wishNo}
	</update>
	<insert id="insertMyWish" parameterType="MyWish">
	  	<selectKey order="BEFORE" keyProperty="wishNo" resultType="int">
	  		select nvl(max(wishNo),0)+1 id from MyWish
	  	</selectKey>
	    insert into MyWish values(
	    #{wishNo}, #{email}, #{product}, #{price}, #{remainDate}, 0, #{img, jdbcType=VARCHAR})
  	</insert>
	<!-- Select with no parameters using the result map for Account class. -->
</mapper>